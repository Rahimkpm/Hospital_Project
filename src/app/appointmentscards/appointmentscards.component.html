<div class="container mt-4">
  <div class="row">
    <div class="col-md-12 mb-3">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'all'" (click)="loadAppointments('all')">SearchResult 
            <span class="badge bg-danger rounded-pill fs-6 px-3 py-2">{{ allCount }}</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'notdone'" (click)="loadAppointments('notdone')">Pending 
             </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'done'" (click)="loadAppointments('done')">Completed
            
          </a>
        </li>
        
      </ul>
    </div>
  </div>
<div>
  <form [formGroup]="hospitalSearchForm">
  <!-- <input
    type="text"
    class="form-control mb-3"
    placeholder="Search by Patient Name or Phone Number"
    formControlName="searchTextbox"
    (blur)="textboxonblur()"
  /> -->
</form>

</div>
<p> Search Text: {{searchText}} </p>








  <div class="row">

    <div class="col-md-4 mb-4" *ngFor="let a of appointmentview">
      <div class="card shadow h-100">

        <div class="card-header bg-primary text-white align-center">
          <i class="fa fa-calendar-check me-2"></i> Token No: <span class="h1"> {{ a.token }}</span>
          
          <!-- <div class="card-header d-flex justify-content-between align-items-center"
           [ngClass]="a.isDone ? 'bg-success text-white' : 'bg-primary text-white'">
        Appointment #{{ a.apid }}</div> -->
        <span class="badge"
              [ngClass]="a.isDone=='true' ? 'bg-success' : 'bg-warning'">
          {{ a.isDone=='true' ? 'Completed' : 'Pending' }}
        </span>

      
        </div>


        <div class="card-body" [ngClass]="a.isDone=='true' ? 'bg-success' : ''" >
          <p><strong>Patient:</strong> {{ a.patientName }}</p>
          <p><strong>Phone:</strong> {{ a.phonenumber }}</p>
          <p><strong>Doctor:</strong> {{ a.doctorName }}</p>
          <p><strong>Hospital:</strong> {{ a.hospitalName }}</p>
          <p>
            <strong>Date:</strong>
            {{ a.appointmentDate | date:'mediumDate' }}
          </p>
          <p><strong>Reason:</strong> {{ a.reason }}</p>
        </div>
<div class="d-flex justify-content-center mb-3">   
        <div class="card-footer text-end">
             <button class="btn btn-warning"  [routerLink]="['/editopntment',a.apid,]">
            <i class="fa fa-eye"></i> Doctor Notes
          </button>

<!-- Mark Done Button -->
        <!-- <button *ngIf="!a.isDone"
                class="btn btn-success "
                (click)="markDone(a.apid)">
          <i class="fa fa-check me-1"></i> Mark Done
        </button> -->

          
          <button  class="btn btn-primary" [routerLink]="['/historyoppoints',a.apid,'details']">
            <i class="fa fa-history"></i> History
          </button>
        </div>
        </div>
            
        

      </div>
    </div>

  </div>

  <!-- Empty State -->
  <div *ngIf="appointmentview.length === 0" class="text-center text-muted mt-5">
    <i class="fa fa-info-circle fa-2x mb-2"></i>
    <p>No appointments found.Please check your subscription status.</p>
  </div>
</div>