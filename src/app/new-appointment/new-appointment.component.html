<html>

<head>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

</head>

<body>

  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">

        <div class="card shadow-lg border-0">
          <div class="card-header text-center bg-primary text-white">
            <h4 class="mb-0">
              <i class="fa fa-calendar-check me-2"></i>Create Appointment
            </h4>
          </div>

          <div class="card-body">

            <form #form="ngForm" (ngSubmit)="saveappointment()">

                <!-- Patient Phone -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-phone me-1"></i> Phone Number
                </label>
                <input type="tel" class="form-control" (change)="GetPatientDetailsByMobile()" [(ngModel)]="appintmentobj.patientPhoneNumber" required
                  #patientPhoneNumberField="ngModel" name="patientPhoneNumber" placeholder="Enter phone number">
                  <small class="text-danger"
                  *ngIf="patientPhoneNumberField.invalid && (patientPhoneNumberField.touched || patientPhoneNumberField.dirty || form.submitted)">
                  Phone number is required
                </small>
              </div>

              <!-- Patient Name -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-user me-1"></i> Patient Name
                </label>
                <input type="text" class="form-control" [(ngModel)]="appintmentobj.patientName" required
                  #patientNameField="ngModel" name="patientName" placeholder="Enter patient name">
                <small class="text-danger"
                  *ngIf="patientNameField.invalid && (patientNameField.touched || patientNameField.dirty || form.submitted)">
                  Patient name is required
                </small>
              </div>

              <!-- Patient Address -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-location-dot me-1"></i> Patient Address
                </label>
                <input type="text" class="form-control" [(ngModel)]="appintmentobj.patientAddress" required
                  #patientAddressField="ngModel" name="patientAddress" placeholder="Enter address">
                  <small class="text-danger"
                  *ngIf="patientAddressField.invalid && (patientAddressField.touched || patientAddressField.dirty || form.submitted)">
                  Address is required
                </small>

              </div>

            

              <!-- Appointment Date -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-calendar me-1"></i> Appointment Date
                </label>
                <input type="date" [(ngModel)]="appintmentobj.appointmentDate" required #appointmentDateField="ngModel"
                  name="appointmentDate" class="form-control">
                  <small class="text-danger"
                  *ngIf="appointmentDateField.invalid && (appointmentDateField.touched || appointmentDateField.dirty || form.submitted)">
                  Appointment Date is required
                </small>
              </div>

              <!-- Reason -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-notes-medical me-1"></i> Reason
                </label>
                <textarea class="form-control" rows="3" [(ngModel)]="appintmentobj.reason" required
                  #reasonsField="ngModel" name="reason" placeholder="Reason for appointment"></textarea>
                  <small class="text-danger"
                  *ngIf="reasonsField.invalid && (reasonsField.touched || reasonsField.dirty || form.submitted)">
                 Reason is required
                </small>
              </div>



              <!-- Hospital -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-hospital me-1"></i> Hospital
                </label>
                <select class="form-select" [(ngModel)]="appintmentobj.hospitalId" #hospitalIdField="ngModel" required
                  (change)="onHospitalChange()" name="hospitalId">
                  <option value="-1">Select Hospital</option>
                  <option *ngFor="let h of hospitals" [value]="h.id">
                    {{h.hospitalName}}
                  </option>
                </select>
                <small class="text-danger"
                  *ngIf="hospitalIdField.invalid && (hospitalIdField.touched || hospitalIdField.dirty || form.submitted)">
                 Reason is required
                </small>
              </div>

              <!-- Doctor -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="fa fa-user-doctor me-1"></i> Doctor
                </label>
                <select class="form-select" [(ngModel)]="appintmentobj.doctorId" required #doctorIdField="ngModel"
                  name="doctorId">
                  <option value="">Select Doctor</option>
                  <option *ngFor="let d of doctors" [value]="d.id">
                    {{ d.name }} -{{d.specialty}}
                  </option>
                </select>
                <small class="text-danger"
                  *ngIf="doctorIdField.invalid && (doctorIdField.touched || doctorIdField.dirty || form.submitted)">
                  Doctor is required
                </small>

              </div>



<!-- iddone -->
                            <div class="mb-3">
                                <label class="form-label">
                                    <i class="fa fa-hand-point-right me-1"></i> if all done click on submit !
                                </label>
                              <input type="hidden" class="form-control" [(ngModel)]="appintmentobj.isDone" name="isDone"
                                    placeholder="Enter isdone">
                            </div>

            <div class="d-flex justify-content-end gap-12">  
                <button type="button" class="btn btn-primary" [routerLink]="['/appointments/hospital/{{hid}}/doctor/{{did}}']">
                  <i class="fa fa-times me-1"></i> Cancel
                </button>

                <!-- Submit -->
                <div class="d-grid">
                  <button type="submit"  class="btn btn-success">
                    <i class="fa fa-check me-1"></i> Submit Appointment
                  </button>
                </div>
              </div>




            </form>

          </div>
        </div>

      </div>
    </div>
  </div>
</body>

</html>